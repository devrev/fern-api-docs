In order to start an airdrop, go to UI and click **Airdrops** -> **Start Airdrop** -> **Your snap-in**.

### From the UI perspective

1. Starting an airdrop begins with establishing a connection to the external system. The snap-in prompts for specific information needed to create this connection. Afterwards, the snap-in verifies that the connection is successful and you should see a success message.

2. Once the connection is established, the snap-in collects information from the external system about the data unit to be exported. This phase is called _external sync units extraction_. An external sync unit is the data unit from the external system to be imported to DevRev. At this point, the UI prompts the user to select an external sync unit from the list.

3. The snap-in then extracts data from the external system.

4. Afterwards, the UI requests the mapping of data from the external system to DevRev. The user can decide which fields from each system should match.

5. Once mapping is complete, the snap-in saves the data to DevRev.

6. Finally, the snap-in streams any possible attachments from the external system to DevRev.

The process described above is known as the initial sync. In all subsequent syncs, the first two steps are skipped.

### In the background

The snap-in constantly communicates with Airdrop, which manages its behavior. When an action occurs in the UI, Airdrop sends a message to the snap-in with details about the event. The snap-in performs an action based on the event type. For example, when a user starts a new airdrop for the first time, Airdrop instructs the snap-in to perform an external sync unit extraction. The snap-in carries out the task and sends back available sync units to Airdrop.

## Terminology

### Sync run

Airdrop extractions are done in _sync runs_.
A sync run is one execution of an airdrop or sync.

### Forward sync

A _forward sync_ is a sync run from an external system to DevRev.
An **extractor** function in the snap-in is responsible for extracting data from the external system.

### Reverse sync

A _reverse sync_ is a sync run from DevRev to an external system.
It uses a **loader** function, to create or update data in the external system.

### 1-way (incremental) sync

A _1-way sync_ (or _incremental sync_) refers to any extraction after the initial import has been successfully completed.
An extractor extracts data that was created or updated in the external system after the start
of the latest successful forward sync, including any changes that occurred during the forward sync,
but were not picked up by it.

A snap-in must consult its state to get information on when the last successful forward sync started.
Airdrop snap-ins must maintain their own states that persists between phases in a sync run,
as well as between sync runs.

A 1-way sync extracts only the domain objects updated or created since the previous successful sync run.

TODO: define the sync unit and how it relates to external project/sync unit, ...
