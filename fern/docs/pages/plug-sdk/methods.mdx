The PLuG SDK is a robust tool designed to elevate your website or application by enhancing our widget’s capabilities. With our SDK, you can seamlessly integrate our feature-rich widget, creating a dynamic and personalized user experience.

## Methods

### Initialise SDK

To get started with the PLuG SDK on your website, call the `init()` method. This method is essential for enabling the SDK’s functionality, including session recording, the chat widget, and the search agent. Initialization is required before you can perform any other actions using the PLuG SDK.

```jsx 
useEffect(() => {
    window.plugSDK.init({
      app_id: <your_unique_app_id>,
    });
  }, []);
```
The `init()` method can accept multiple inputs, which are explained below:

|Input Parameter   |Description   |Values   |Mandatory   |
|---|---|---|---|
|app_id   |This is the unique identifier for your PLuG SDK.    |String   |Yes   |
|disable_plug_chat_window   |The chat widget is enabled by default. Use this option if you want to disable the chat widget.   |Boolean (True or False)   |No   |
|session_recording_key   |This key identifies your session recording account and is required to enable the PLuG SDK session recording features.   |String   |No   |
|enable_session_recording   |This instructs the widget to determine whether to start the session recording.   |Boolean (True or False)   |No   |
|session_token   |This unique token identifies the user interacting with your app.   |String   |No   |
|fetchSessionToken   |Request a new session token.   |Function of type () => Promise<string>   |No   |
|primary_text_color   |This determines the launcher color, button text for new tickets and conversations, conversation user text, and more. It should be a valid hex code, such as #f0f0f0.   |String   |No   |
|session_recording_options   |Options for recording observability sessions.   |** x-ref   |No   |
|accent_color   |The accent color of the plug affects the launcher, new ticket and conversation buttons, conversation user text, and more.   |String   |No   |
|custom_launcher_selector   |A CSS selector string is used to match the element to which the widget will be attached. You can also set this selector from the PLuG settings on app.devrev.ai. If both sources are set, this value will be considered the definitive source.   |Boolean (True or False)   |No    |
|spacing   |Padding from the launcher: This padding can also be set in the plug settings on app.devrev.ai. If a value is specified in both places, this value will be considered the definitive source. **Bottom: Padding from the bottom of the launcher. Side: Spacing from the sides of the launcher   |**object {bottom: string side: string}   |No   |
|theme   |The color scheme for the launcher and widget.   |light or dark   |No   |
|widget_alignment   |The PLuG widget can be positioned on either the left or right side of the launcher. You can also adjust the widget alignment through the plug settings at app.devrev.ai. If alignment settings are configured in both places, the value from app.devrev.ai will override the launcher setting.   |**need info   |No   |







- `plugSDK.init()` Initialize the PLuG chat widget.

- `plugSDK.initSearchAgent()` Initialize PLuG search agent.

- `plugSDK.shutdown()` End the user session which is currently initialized in PLuG widget. 

- `plugSDK.toggleWidget()` Open/close the chat widget.

- `plugSDK.toggleSearchAgent()` Open/close the search agent.

- `plugSDK.onEvent()` Perform specific actions based on the payload type received from the PLuG widget. 

- `plugSDK.toggleTheme('light/dark')` Toggle PLuG widget theme.

- `plugSDK.toggleWidget(true, 'create_conversation', {startConversationContent: 'Hi',});` Start a conversation.

- `plugSDK.prefillSearchQuery(query:"string")` Prefill the search input of the search agent.

## Initialize chat

Calling the `init()` method initializes the PLuG chat widget on your website. Initializing the PLuG widget is necessary for you to perform any other actions on the PLuG widget SDK.

```jsx 
useEffect(() => {
    window.plugSDK.init({
      app_id: <your_unique_app_id>,
    });
  }, []);
```

<Callout intent="info">
When React is using `Strict` mode, you might get a warning message from `window.plugSDK.init()` being called multiple times. These errors won't impact the installation and functioning of the widget.
</Callout>

## Initialize search

Calling the `initSearchAgent()` method initializes the PLuG Search agent on your website. Initializing search is necessary for you to perform any other actions on the PLuG widget SDK.

```jsx
useEffect(() => {
  window.plugSDK.init({
    app_id: '<your_unique_app_id>',
    disable_plug_chat_window: true,
});

  window.plugSDK.onEvent((payload) => {
    if (payload.type === 'ON_PLUG_WIDGET_READY') {
      window.plugSDK.initSearchAgent();
    }
  });
}, []);
```

## Shutdown the widget

The `shutdown()` method is helpful when you want to end the user session which is currently initialized in the PLuG widget. You can use this method to clear your users' conversations and tickets when they log out of your application.

```jsx
await window.plugSDK.shutdown();
```

After calling the `shutdown()` method, you can call the `init()` method to reinitialize PLuG widget on your website if you wish to showcase the PLuG widget again in the logged out version of your application. 

<Callout intent="info">
Once the `shutdown()` method is called, all the other functionality in the widget such as session recording or Nudges is also be stopped. You need to reinitialize the widget again to have these features active. 
</Callout>

<iframe src="https://codesandbox.io/embed/shutdown-plug-sdk-sstn8g?fontsize=14&hidenavigation=1&theme=dark"
      style={{width:'100%', height:'600px', border:'0', borderRadius: '4px', overflow:'hidden',}}
     title="Toggle_Plug_with_Button"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>

## Open or close the widget

To control whether the PLuG widget launcher screen is open, you should use either the `togglewidget()` method with a boolean value or the `toggleSearchAgent()` method, depending on which PLuG instance you are using.

```jsx
window.plugSDK.toggleWidget(true);
window.plugSDK.toggleSearchAgent(true);
```

<iframe src="https://codesandbox.io/embed/toggle-plug-with-button-nnkmk3?fontsize=14&hidenavigation=1&module=%2Fsrc%2FTogglePlug.js&theme=dark&view=preview&hidedevtools=1"
      style={{width:'100%', height:'600px', border:'0', borderRadius: '4px', overflow:'hidden',}}
     title="Toggle_Plug_with_Button"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>

## Take actions from events

This method can be used to listen to events coming from the PLuG widget. The following are the different `PAYLOAD_TYPES`.

- `ON_PLUG_WIDGET_CLOSED` The PLuG widget is closed.

- `ON_PLUG_WIDGET_OPENED` The PLuG widget is opened.

- `ON_PLUG_WIDGET_READY` The PLuG widget is ready.
- 
- `ON_PLUG_WIDGET_UNREAD_COUNT_CHANGE` The user receives a new message to their PLuG. You can also listen to the number of unread messages and display that to your user. 

```jsx
useEffect(() => {
  window.plugSDK.onEvent((payload) => {
    if (payload.type === PAYLOAD_TYPE) {
      //Your logic goes here
    }
  });
}, []);
```

<iframe src="https://codesandbox.io/embed/events-rendered-7rhzj7?fontsize=14&hidenavigation=1&module=%2Fsrc%2FOnEvents.js&theme=dark&view=preview&hidedevtools=1"
     style={{width:'100%', height:'600px', border:'0', borderRadius: '4px', overflow:'hidden',}}
     title="Events_Rendered"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
></iframe>

## Toggle theme

The toggle theme method allows you to dynamically modify the PLuG SDK's theme, even after initializing the PLuG widget. This functionality enables real-time adjustments to the PLuG widget's theme based on diverse themes preferred by your users.

The method accepts two inputs: `light` and `dark`.
```jsx
window.plugSDK.toggleTheme('light | dark');
```
The parameter is optional; calling `toggleTheme()` toggles the current theme, and specifying a theme as a parameter allows toggling for that specific theme.

## Start conversation

This method is utilized to open the PLuG widget with the conversation creation view activated. It essentially replicates the action of clicking the **Send us a message** button, launching the widget directly to the conversation initiation screen.

The method also accepts an optional input parameter, allowing you to pre-fill a message in the conversation creation screen. This provides your users with a prompt to initiate a conversation with your team.

```jsx
plugSDK.toggleWidget(true, 'create_conversation', {
        startConversationContent: 'Hi',
      });
```

Looking for something more? Reach out to us through our own PLuG widget in the bottom right of this screen and we would be happy to assist you.
